# 5. –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ –ø–æ–¥–ø–∏—Å–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (UI)

## –û–ø–∏—Å–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –≤ –ø–æ–¥–ø–∏—Å—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç –º–∏–Ω—É—Å–æ–≤ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ MVP
- –§–æ—Ä–º–∞—Ç: [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë] 60% (12/20)
- 10 —Å–∏–º–≤–æ–ª–æ–≤, –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª = 10%
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
  - üü¢ –ó–µ–ª–µ–Ω—ã–π: < 33% –º–∏–Ω—É—Å–æ–≤
  - üî¥ –ö—Ä–∞—Å–Ω—ã–π: ‚â• 33% –º–∏–Ω—É—Å–æ–≤
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ: –∑–∞–ø–æ–ª–Ω–µ–Ω–æ = int((–º–∏–Ω—É—Å—ã / –≤—Å–µ–≥–æ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) √ó 10)

## –ó–∞–¥–∞—á–∏

### 5.1. –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
**–§–∞–π–ª:** `bot/telegram_handler.py` –∏–ª–∏ –Ω–æ–≤—ã–π `bot/formatters.py`

–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:
- `format_progress_bar(negative_count, total_count)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω—É—Å–æ–≤, –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É: `[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë] 60% (12/20)`
- –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏: üü¢ –∏–ª–∏ üî¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞

### 5.2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–∞–ª–µ—Ä–µ–∏
**–§–∞–π–ª:** `bot/telegram_handler.py`

–í –º–µ—Ç–æ–¥–µ `_format_caption()`:
- –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≥–∞–ª–µ—Ä–µ–∏ —á–µ—Ä–µ–∑ `database.get_gallery_statistics()`
- –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –µ—Å—Ç—å –ò `total_images > 0`, –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ –ø–æ–¥–ø–∏—Å—å
- –ï—Å–ª–∏ `total_images == 0`, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

### 5.3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏
**–§–∞–π–ª:** `bot/telegram_handler.py`

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `_format_caption()`:
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–∞–ª–µ—Ä–µ–µ: `üìä –ì–∞–ª–µ—Ä–µ—è: "–ù–∞–∑–≤–∞–Ω–∏–µ_–≥–∞–ª–µ—Ä–µ–∏"`
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Å –∏ —Ä–µ–π—Ç–∏–Ω–≥: `–í–µ—Å: 2.4 | ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3.2/5.0)`
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- –§–æ—Ä–º–∞—Ç —Å–æ–≥–ª–∞—Å–Ω–æ MVP:
  ```
  üìä –ì–∞–ª–µ—Ä–µ—è: "–ù–∞–∑–≤–∞–Ω–∏–µ_–≥–∞–ª–µ—Ä–µ–∏"
  –í–µ—Å: 2.4 | ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3.2/5.0)
  –ü—Ä–æ–≥—Ä–µ—Å—Å: [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë] 60% (12/20)
  ```

### 5.4. –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–§–∞–π–ª:** `bot/telegram_handler.py`

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:
- `calculate_display_rating(positive_votes, negative_votes)` - —Ä–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –§–æ—Ä–º—É–ª–∞: (positive_votes * 5 + negative_votes * 1) / total_votes
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∏–∑ StashApp, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ (10 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é (üü¢/üî¥)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ó–∞–¥–∞—á–∞ 2: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–∞–ª–µ—Ä–µ–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ–ª–∏–∑–∞

### ‚úÖ –ú–æ–∂–Ω–æ —Ä–µ–ª–∏–∑–∏—Ç—å –ø–æ—Å–ª–µ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏

**–£—Å–ª–æ–≤–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞:**
1. –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (`total_images > 0`)
2. –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç, –ø–æ–¥–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–±–µ–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞)
3. –í—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å

**Fallback-–º–µ—Ö–∞–Ω–∏–∑–º—ã:**
- –ï—Å–ª–∏ `total_images == 0` –∏–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç ‚Üí –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- –ï—Å–ª–∏ `negative_count == 0` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0%
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚Üí –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º:**
- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/random` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç, –ø–æ–¥–ø–∏—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
- [ ] –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –µ—Å—Ç—å, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å

**–ß—Ç–æ –ù–ï —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –µ—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç)
- –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ó–∞–¥–∞—á–∞ 6: –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≥–∞–ª–µ—Ä–µ–µ
- –ó–∞–¥–∞—á–∞ 7: –ü–æ—Ä–æ–≥–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
