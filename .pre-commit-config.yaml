# Конфигурация pre-commit хуков
# Установка: pre-commit install
# Обновление версий хуков: pre-commit autoupdate

repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    # Версия ruff
    rev: v0.1.9
    hooks:
      # Запуск линтера
      - id: ruff
        args: [--fix]
      # Запуск форматтера
      - id: ruff-format
  - repo: local
    hooks:
      - id: pytest
        name: "Запуск быстрых тестов (pytest)"
        entry: bash -c 'if [ -f venv/bin/pytest ]; then venv/bin/pytest -x; elif command -v pytest >/dev/null 2>&1; then pytest -x; else echo "pytest not found, skipping tests"; exit 0; fi'
        language: system
        pass_filenames: false
        always_run: false
        verbose: true
